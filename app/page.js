'use client';

import { useEffect, useState } from 'react';
import LanguageSelector from '../components/LanguageSelector';
import Link from 'next/link';

export default function HomePage() {
  const [nativeLang, setNativeLang] = useState('ar');
  const [targetLang, setTargetLang] = useState('en');

  useEffect(() => {
    const saved = JSON.parse(localStorage.getItem('lingomaster:prefs') || '{}');
    if (saved.nativeLang) setNativeLang(saved.nativeLang);
    if (saved.targetLang) setTargetLang(saved.targetLang);
  }, []);

  useEffect(() => {
    localStorage.setItem('lingomaster:prefs', JSON.stringify({ nativeLang, targetLang }));
  }, [nativeLang, targetLang]);

  return (
    <div className="grid cols-2" style={{ alignItems: 'center' }}>
      <div>
        <h1 style={{ fontSize: 36, lineHeight: 1.2, margin: '8px 0' }}>????? ????? ? ???? ?? ??? ?????</h1>
        <p className="muted" style={{ marginBottom: 18 }}>???? ???? ???? ?????? ???? ???? ??????. ???? ??????? ?????? ??????? ?? ??????? ??? ????????? ?????? ??????? ?????????.</p>
        <div className="card" style={{ marginBottom: 12 }}>
          <LanguageSelector nativeLang={nativeLang} targetLang={targetLang} onNativeChange={setNativeLang} onTargetChange={setTargetLang} />
        </div>
        <div style={{ display: 'flex', gap: 10 }}>
          <Link href={{ pathname: '/learn', query: { nl: nativeLang, tl: targetLang } }} className="btn primary">???? ??????</Link>
          <Link href="/pricing" className="btn">????? PRO</Link>
        </div>
      </div>
      <div>
        <div className="card" style={{ minHeight: 280 }}>
          <h3>???? ?????</h3>
          <ul>
            <li>??? ???? ???? ??? ??????</li>
            <li>??????? ?????? ??????? ??????? ?????</li>
            <li>????? ?????: ?????? ???????? ??????? ???????</li>
            <li>???? ??? ????????? ?????</li>
          </ul>
        </div>
      </div>
    </div>
  );
}
